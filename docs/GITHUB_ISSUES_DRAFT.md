# GitHub Issues Draft

## Issue 1: 실시간 AI 채팅 (Core) 구현
**제목:** [Feature] 실시간 AI 채팅 시스템 (SSE) 구현

**본문:**
### 📋 작업 배경 (Background)
플레이어에게 실시간으로 전략 조언을 제공하기 위해서는 일반적인 HTTP 요청-응답 방식보다 지연 시간이 짧은 스트리밍 방식이 필요합니다. 사용자가 답변을 기다리는 시간을 최소화하기 위해 토큰 단위로 응답을 전송해야 합니다.

### ✅ 작업 내용 (Work Content)
- `POST /api/chat/stream` 엔드포인트 구현
- SSE (Server-Sent Events) 프로토콜 적용
- OpenAI API 연동 및 스트림 처리 로직 구현
- FAQ 캐싱 로직 구현 (Redis 활용)

### 🎯 인수 조건 (Acceptance Criteria)
- [ ] 클라이언트 요청 시 첫 번째 토큰이 생성되는 즉시 전송이 시작되어야 한다.
- [ ] AI의 응답이 끊김 없이 스트리밍되어야 한다.
- [ ] 캐시된 질문(FAQ)에 대해서는 5ms 이내에 응답이 시작되어야 한다.

---

## Issue 2: 맥락 관리 (Memory) 시스템 구축
**제목:** [Feature] 대화 맥락 관리 및 장기 기억 시스템 구축

**본문:**
### 📋 작업 배경 (Background)
사용자와의 연속적인 대화를 이해하고, 세션이 종료된 후에도 사용자의 플레이 스타일을 기억하여 맞춤형 조언을 제공해야 합니다. 이를 위해 단기 기억과 장기 기억을 분리하여 관리해야 합니다.

### ✅ 작업 내용 (Work Content)
- Redis를 이용한 단기 기억 캐싱 구현 (최근 10턴 유지)
- MySQL 스키마 설계 및 구현 (Users, Chat_Sessions, Chat_Logs)
- 세션 종료 시 사용자 스타일 태그 요약 및 MySQL 장기 저장 로직 구현

### 🎯 인수 조건 (Acceptance Criteria)
- [ ] 최근 10턴의 대화 내용이 Redis에 저장되고 조회되어야 한다.
- [ ] Redis 데이터 조회 속도는 1ms 내외여야 한다.
- [ ] 세션 종료 시 대화 내역이 요약되어 MySQL의 `Users` 또는 관련 테이블에 저장되어야 한다.

---

## Issue 3: 동적 페르소나 시스템 구현
**제목:** [Feature] 동적 페르소나 (시스템 프롬프트) 전환 기능 구현

**본문:**
### 📋 작업 배경 (Background)
사용자의 상황(전략적 조언 필요 vs 멘탈 케어 필요)에 따라 AI가 다른 어조와 관점으로 답변해야 합니다. 이를 위해 동적으로 시스템 프롬프트를 교체하는 기능이 필요합니다.

### ✅ 작업 내용 (Work Content)
- '전략가(Strategist)' 및 '동반자(Companion)' 페르소나 프롬프트 템플릿 작성
- 요청 파라미터(`persona`)에 따라 올바른 프롬프트를 로드하는 로직 구현
- API 연동 테스트

### 🎯 인수 조건 (Acceptance Criteria)
- [ ] `strategy` 모드 요청 시, 수학적이고 확률 기반의 답변이 생성되어야 한다.
- [ ] `companion` 모드 요청 시, 공감과 위로 중심의 답변이 생성되어야 한다.
- [ ] 모드 전환 시 오류 없이 즉시 적용되어야 한다.

---

## Issue 4: 할루시네이션 제어 (룰 주입)
**제목:** [Feature] 포커 룰 할루시네이션 제어 및 컨텍스트 주입

**본문:**
### 📋 작업 배경 (Background)
LLM이 포커 룰이나 확률에 대해 잘못된 정보를 생성(할루시네이션)하는 것을 방지해야 합니다. 정확한 통계 데이터를 제공하기 위해 사전에 정의된 데이터를 참조하도록 해야 합니다.

### ✅ 작업 내용 (Work Content)
- 포커 확률표 및 룰 정의 JSON 데이터 구축
- 룰 관련 질문 감지 시, 해당 JSON 데이터를 프롬프트 컨텍스트에 주입하는 전처리 로직 구현
- 답변의 정확성 검증

### 🎯 인수 조건 (Acceptance Criteria)
- [ ] 포커 족보 및 확률 관련 질문 시, 미리 정의된 데이터에 기반한 답변을 해야 한다.
- [ ] 없는 족보를 만들어내거나 잘못된 승률을 제시하는 빈도가 현저히 낮아야 한다.

---

## Issue 5: 데이터베이스 및 인프라 구축
**제목:** [Infra] MySQL 및 Redis 인프라 환경 구성

**본문:**
### 📋 작업 배경 (Background)
서비스의 안정적인 운영과 데이터 무결성을 보장하기 위해 견고한 데이터베이스 및 캐시 서버 환경이 필요합니다.

### ✅ 작업 내용 (Work Content)
- Docker Compose를 이용한 MySQL 8.0 및 Redis 설정 파일 작성/검증
- Spring Boot와 각 데이터베이스 간의 연동 설정 (`application.yml`)
- 기본 DDL 스크립트 작성 (초기 테이블 생성)

### 🎯 인수 조건 (Acceptance Criteria)
- [ ] `docker-compose up` 명령으로 DB 서버들이 정상적으로 실행되어야 한다.
- [ ] Spring Boot 애플리케이션 시작 시 DB 연결 오류가 없어야 한다.
- [ ] 데이터의 CRUD 작업이 정상적으로 수행되어야 한다.
